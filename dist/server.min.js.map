{"version":3,"sources":["server.js"],"names":["require","config","Telegram","cors","TelegramBot","TelegramToken","polling","express","app","use","origin","optionsSuccessStatus","port","process","env","PORT","bodyParser","mongoose","set","connect","configDB","url","options","json","morgan","extended","expressWs","getWss","redT","telegram","console","log"],"mappings":"aACAA,QAAQ,UAAUC,SAAlBD,IAAAA,KAAQA,QAAUC,QAEdC,SAAgBF,QAAQ,yBADxBG,cAAe,iDAGfC,YAAgB,IAAIF,SAASG,cAAe,CAACC,SAAS,IAFtDJ,GAAQF,QAAe,MAE3BO,QAAAP,QAAA,WAOIQ,IAAgBD,UAJpBC,IAAAC,IAAAN,KAAA,CACAO,OAAA,IACAC,qBAAA,OAQA,IAAIC,KAAaC,QAAQC,IAAIC,MAAQ,GAPjCR,UAAgBP,QAAQ,aAARA,CAApBQ,KASIQ,WAAahB,QAAQ,eARrBQ,OAAgBD,QACpB,UACIE,SAAST,QAAA,qBACTU,SADSV,QAAA,YAETW,QAAAA,gBAAAA,CAAsBM,UAFbA,SAAbC,IAAA,oBAAA,GAIAD,SAAQC,IAASL,kBAAjB,GAUAI,SAASE,QAAQC,SAASC,IAAKD,SAASE,SAExCtB,QAAQ,kBAERQ,IAAIC,IAAIO,WAAWO,QAXnBf,IAAIgB,IAAAA,WAASxB,WAAb,CAY+ByB,UAX/B,KAYAjB,IAAIC,IAAIe,OAAO,aACfhB,IAAIU,IAAI,cAAe,OAZvBV,IAAIY,IAAAA,QAAWpB,WACfQ,IAAIS,IAAAA,QAAWjB,OAAQ,WACvBA,IAAAA,KAAQ0B,UAAAC,UAgBRd,QAAQe,KAAOA,MACVC,SAAWzB,YAhBhBa,OAAAA,KAAaW,KACbX,OAAAA,WAAa,EACbA,QAAQ,2BAARA,CAA+BG,MAC/BpB,QAAA,eAAAA,CAAAQ,IAAAoB,MAkBA5B,QAAQ,cAARA,CAAuBQ,IAAKoB,MAjB5B5B,QAAQ,iBAARA,CAkB0BQ,IAjB1BoB,MAkBA5B,QAAQ,oBAARA,CAA6B4B,MAC7B5B,QAAQ,oBAARA,CAA6B4B,MAlB7BpB,QAAQQ,gBAARR,GACAA,QAAQQ,0BAARR,CAA8BoB,MAACH,IAAAA,OAAQb,KAAC,WAAxCkB,QAAAC,IAAA,yBAAAnB","file":"server.min.js","sourcesContent":["\r\nrequire('dotenv').config();\r\nvar cors = require('cors');\r\nlet Telegram      = require('node-telegram-bot-api');\r\nlet TelegramToken = '1413925001:AAG07uABLRu07s1pPvmAYUKY0x5adPd_wVw';\r\nlet TelegramBot   = new Telegram(TelegramToken, {polling: true});\r\nlet fs \t\t\t  = require('fs');\r\n//let https     \t  = require('https')\r\n//let privateKey    = fs.readFileSync('./ssl/b86club.key', 'utf8');\r\n//let certificate   = fs.readFileSync('./ssl/b86club.pem', 'utf8');\r\n//let credentials   = {key: privateKey, cert: certificate};\r\nlet express       = require('express');\r\nlet app           = express();\r\n//let server \t  \t  = https.createServer(credentials, app);\r\napp.use(cors({\r\n    origin: '*',\r\n    optionsSuccessStatus: 200\r\n}));\r\nlet port       = process.env.PORT || 80;\r\nlet expressWs  = require('express-ws')(app);\r\nlet bodyParser = require('body-parser');\r\nvar morgan = require('morgan');\r\n// Setting & Connect to the Database\r\nlet configDB = require('./config/database');\r\nlet mongoose = require('mongoose');\r\nrequire('mongoose-long')(mongoose); // INT 64bit\r\nmongoose.set('useFindAndModify', false);\r\nmongoose.set('useCreateIndex',   true);\r\nmongoose.connect(configDB.url, configDB.options); // kết nối tới database\r\n// cấu hình tài khoản admin mặc định và các dữ liệu mặc định\r\nrequire('./config/admin');\r\n// đọc dữ liệu from\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({extended:false}));\r\napp.use(morgan('combined'));\r\napp.set('view engine', 'ejs'); // chỉ định view engine là ejs\r\napp.set('views', './views');   // chỉ định thư mục view\r\n// Serve static html, js, css, and image files from the 'public' directory\r\napp.use(express.static('public'));\r\n// server socket\r\nlet redT = expressWs.getWss();\r\nprocess.redT = redT;\r\nredT.telegram = TelegramBot;\r\nglobal['redT'] = redT;\r\nglobal['userOnline'] = 0;\r\nrequire('./app/Helpers/socketUser')(redT); // Add function socket\r\nrequire('./routerHttp')(app, redT);   // load các routes HTTP\r\nrequire('./routerCMS')(app, redT);\t//load routes CMS\r\nrequire('./routerSocket')(app, redT); // load các routes WebSocket\r\nrequire('./app/Cron/taixiu')(redT);   // Chạy game Tài Xỉu\r\nrequire('./app/Cron/baucua')(redT);   // Chạy game Bầu Cua\r\nrequire('./config/cron')();\r\nrequire('./app/Telegram/Telegram')(redT); // Telegram Bot\r\napp.listen(port, function() {\r\n    console.log(\"Server listen on port \", port);\r\n});"]}