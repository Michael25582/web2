{"version":3,"sources":["server.js"],"names":["require","config","cors","Telegram","TelegramToken","TelegramBot","polling","fs","express","app","use","origin","optionsSuccessStatus","port","process","env","PORT","expressWs","bodyParser","morgan","configDB","mongoose","set","connect","url","options","json","urlencoded","extended","redT","getWss","telegram","global","listen","console","log"],"mappings":"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","sourcesContent":["\r\nrequire('dotenv').config();\r\nvar cors = require('cors');\r\nlet Telegram      = require('node-telegram-bot-api');\r\nlet TelegramToken = '1413925001:AAG07uABLRu07s1pPvmAYUKY0x5adPd_wVw';\r\nlet TelegramBot   = new Telegram(TelegramToken, {polling: true});\r\nlet fs \t\t\t  = require('fs');\r\n//let https     \t  = require('https')\r\n//let privateKey    = fs.readFileSync('./ssl/b86club.key', 'utf8');\r\n//let certificate   = fs.readFileSync('./ssl/b86club.pem', 'utf8');\r\n//let credentials   = {key: privateKey, cert: certificate};\r\nlet express       = require('express');\r\nlet app           = express();\r\n//let server \t  \t  = https.createServer(credentials, app);\r\napp.use(cors({\r\n    origin: '*',\r\n    optionsSuccessStatus: 200\r\n}));\r\nlet port       = process.env.PORT || 80;\r\nlet expressWs  = require('express-ws')(app);\r\nlet bodyParser = require('body-parser');\r\nvar morgan = require('morgan');\r\n// Setting & Connect to the Database\r\nlet configDB = require('./config/database');\r\nlet mongoose = require('mongoose');\r\nrequire('mongoose-long')(mongoose); // INT 64bit\r\nmongoose.set('useFindAndModify', false);\r\nmongoose.set('useCreateIndex',   true);\r\nmongoose.connect(configDB.url, configDB.options); // kết nối tới database\r\n// cấu hình tài khoản admin mặc định và các dữ liệu mặc định\r\nrequire('./config/admin');\r\n// đọc dữ liệu from\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({extended:false}));\r\napp.use(morgan('combined'));\r\napp.set('view engine', 'ejs'); // chỉ định view engine là ejs\r\napp.set('views', './views');   // chỉ định thư mục view\r\n// Serve static html, js, css, and image files from the 'public' directory\r\napp.use(express.static('public'));\r\n// server socket\r\nlet redT = expressWs.getWss();\r\nprocess.redT = redT;\r\nredT.telegram = TelegramBot;\r\nglobal['redT'] = redT;\r\nglobal['userOnline'] = 0;\r\nrequire('./app/Helpers/socketUser')(redT); // Add function socket\r\nrequire('./routerHttp')(app, redT);   // load các routes HTTP\r\nrequire('./routerCMS')(app, redT);\t//load routes CMS\r\nrequire('./routerSocket')(app, redT); // load các routes WebSocket\r\nrequire('./app/Cron/taixiu')(redT);   // Chạy game Tài Xỉu\r\nrequire('./app/Cron/baucua')(redT);   // Chạy game Bầu Cua\r\nrequire('./config/cron')();\r\nrequire('./app/Telegram/Telegram')(redT); // Telegram Bot\r\napp.listen(port, function() {\r\n    console.log(\"Server listen on port \", port);\r\n});"],"file":"server.dev.js"}